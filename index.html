<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Vocabulary Trainer</title>

<style>
    body{
        font-family: sans-serif; margin:0; background:#111; color:#fff;
    }
    .top-right, .top-left{
        position:fixed; top:10px; padding:10px 14px; border-radius:8px;
        background:#333; color:#fff; cursor:pointer; font-size:14px;
    }
    .top-right{ right:10px; }
    .top-left{ left:10px; display:none; }

    .container{ padding:20px; max-width:450px; margin:auto; text-align:center; }
    input,button{
        width:100%; padding:12px; margin:8px 0; font-size:16px;
    }
    input{
        border:2px solid #444; border-radius:6px; background:#222; color:#fff;
    }
    button{
        background:#03a9f4; border:none; color:#fff; border-radius:6px;
    }
    #nextBtn{ margin-top:8px; background:#4caf50; display:none; }

    .correct{ border-color:#00e676 !important; }
    .wrong{ border-color:#ff1744 !important; }

    /* หน้า logs */
    #logPage{ display:none; padding:20px; }
    .rowBox{
        display:flex; gap:10px; justify-content:space-between;
    }
    .listBox{
        width:50%; background:#222; padding:10px; border-radius:8px; min-height:250px; overflow-y:auto;
    }
    .wordItem{ background:#333; padding:6px; border-radius:6px; margin-bottom:6px; }
    .wordItem button{
        background:red; margin-top:4px; font-size:13px;
    }
</style>
</head>

<body>

<!-- ปุ่มเปิดเพิ่มคำศัพท์ -->
<div class="top-right" id="openAdd">เพิ่มคำศัพท์</div>
<!-- ปุ่มเข้าหน้าบันทึก -->
<div class="top-left" id="openLog">บันทึก</div>

<!-- หน้าเพิ่มคำศัพท์ -->
<div class="container" id="addPage" style="display:none;">
    <h2>เพิ่มคำศัพท์</h2>
    <input id="engInput" placeholder="English Word">
    <input id="thaiInput" placeholder="แปลไทย">
    <button onclick="addWord()">เพิ่มคำศัพท์</button>
</div>

<!-- หน้าเล่น -->
<div class="container" id="mainPage" style="display:none;">
    <h2 id="showWord"></h2>
    <input id="answerInput" placeholder="พิมพ์คำแปลที่นี่">
    <button onclick="checkAnswer()">ส่งคำตอบ</button>
    <button id="nextBtn" onclick="nextWord()">NEXT</button>
</div>

<!-- หน้า Log -->
<div id="logPage">
    <h2>ผลการทำแบบฝึกหัด</h2>
    <div class="rowBox">
        <div class="listBox">
            <h3>ตอบถูก</h3>
            <div id="correctList"></div>
        </div>
        <div class="listBox">
            <h3>ตอบผิด</h3>
            <div id="wrongList"></div>
        </div>
    </div>
</div>

<script>
let words = JSON.parse(localStorage.getItem("words")||"[]");
let correct = JSON.parse(localStorage.getItem("correct")||"[]");
let wrong = JSON.parse(localStorage.getItem("wrong")||"[]");

let now = 0;

// เปลี่ยนหน้า
function showAddPage(){ hideAll(); addPage.style.display="block"; }
function showMainPage(){ hideAll(); mainPage.style.display="block"; loadWord(); openLog.style.display="block";}
function showLog(){ hideAll(); logPage.style.display="block"; openLog.style.display="block"; loadLog();}

function hideAll(){
    addPage.style.display="none";
    mainPage.style.display="none";
    logPage.style.display="none";
}

// เปิดหน้าเริ่ม
if(words.length==0) showAddPage();
else showMainPage();

// ปุ่มมุมขวาบน
openAdd.onclick=()=>showAddPage();
openLog.onclick=()=>showLog();

// เพิ่มคำศัพท์
function addWord(){
    let e=engInput.value.trim(), t=thaiInput.value.trim();
    if(!e||!t) return alert("ใส่คำให้ครบ");
    words.push({eng:e,thai:t});
    localStorage.setItem("words",JSON.stringify(words));
    engInput.value=""; thaiInput.value="";
    alert("เพิ่มแล้ว");
    showMainPage();
}

// โหลดคำถาม
function loadWord(){
    if(words.length==0) return alert("ยังไม่มีคำศัพท์");
    now = Math.floor(Math.random()*words.length);
    showWord.innerHTML = words[now].eng;
    answerInput.value="";
    answerInput.className="";
    nextBtn.style.display="none";
}

// ตรวจคำตอบ
function checkAnswer(){
    let ans = answerInput.value.trim();
    if(ans=="") return;

    if(ans == words[now].thai){
        answerInput.className="correct";
        moveWord(words[now],"correct");
    }else{
        answerInput.className="wrong";
        alert("คำตอบที่ถูกคือ: " + words[now].thai);
        moveWord(words[now],"wrong");
    }
    nextBtn.style.display="block";
}

// ย้ายข้อมูล ถูก/ผิด
function moveWord(item,type){
    let cIndex = correct.findIndex(x=>x.eng==item.eng);
    let wIndex = wrong.findIndex(x=>x.eng==item.eng);
    if(type=="correct"){
        if(wIndex>-1) wrong.splice(wIndex,1);
        if(cIndex==-1) correct.push(item);
    }else{
        if(cIndex>-1) correct.splice(cIndex,1);
        if(wIndex==-1) wrong.push(item);
    }
    saveLog();
}

// ไปข้อต่อไป
function nextWord(){ loadWord(); }

// บันทึกลง LocalStorage
function saveLog(){
    localStorage.setItem("correct",JSON.stringify(correct));
    localStorage.setItem("wrong",JSON.stringify(wrong));
}

// โหลด Log
function loadLog(){
    correctList.innerHTML="";
    wrongList.innerHTML="";
    correct.forEach(v=>{
        correctList.innerHTML += `<div class='wordItem'>${v.eng} = ${v.thai}<br><button onclick="removeCorrect('${v.eng}')">ลบ</button></div>`;
    });
    wrong.forEach(v=>{
        wrongList.innerHTML += `<div class='wordItem'>${v.eng} = ${v.thai}</div>`;
    });
}
function removeCorrect(word){
    correct=correct.filter(x=>x.eng!=word);
    saveLog(); loadLog();
}
</script>

</body>
</html>
